<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SOAP Response → JSON Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 20px;
    }
    textarea {
      width: 100%;
      height: 200px;
      padding: 10px;
      font-family: monospace;
    }
    button {
      margin-top: 10px;
      padding: 10px 15px;
      cursor: pointer;
    }
    pre {
      background: #1e1e1e;
      color: #dcdcdc;
      padding: 15px;
      overflow: auto;
      max-height: 500px;
    }
    .error {
      color: red;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h2>SOAP API Response → JSON Converter</h2>

<textarea id="input" placeholder="Paste SOAP response here..."></textarea>
<br>
<button onclick="convert()">Convert</button>

<pre id="output"></pre>
<div class="error" id="error"></div>

<script>
function deepParse(value) {
  // If it's an array, parse each item
  if (Array.isArray(value)) {
    return value.map(deepParse);
  }

  // If it's an object, parse each property
  if (value !== null && typeof value === "object") {
    const result = {};
    for (const key in value) {
      result[key] = deepParse(value[key]);
    }
    return result;
  }

  // If it's a string, try to parse JSON inside it
  if (typeof value === "string") {
    const trimmed = value.trim();
    if (
      (trimmed.startsWith("{") && trimmed.endsWith("}")) ||
      (trimmed.startsWith("[") && trimmed.endsWith("]"))
    ) {
      try {
        return deepParse(JSON.parse(trimmed));
      } catch {
        return value; // not valid JSON
      }
    }
  }

  return value;
}
</script>

</body>
</html>
